import{useCallback as e}from"react";import{ap as a,aq as t,b as r,f as s,al as n,ak as o,ar as i,as as l}from"./privy-provider-Bdp7T8ta.mjs";import{Connection as c,PublicKey as d,Transaction as m,SystemProgram as p,TransactionInstruction as u,VersionedTransaction as f,TransactionMessage as w}from"@solana/web3.js";import{getSolanaRpcEndpointForCluster as k}from"@privy-io/js-sdk-core";import{u as y}from"./internal-context-VSJVgTzy.mjs";var h={id:a,getBalance:({address:e,cluster:a})=>new c(k(a)).getBalance(new d(e)),createTransferTransaction:async({from:e,to:a,amount:t,cluster:r})=>{let s=new d(e),n=new m;n.add(p.transfer({fromPubkey:s,toPubkey:new d(a),lamports:t}));let o=new c(k(r)),i=await o.getLatestBlockhash();return n.recentBlockhash=i.blockhash,n.feePayer=s,{transaction:n,connection:o}},createBridgeTransactionFromRelayQuote:async({quote:e,from:a,cluster:r})=>{let s=e.steps[0]?.items?.[0];if(!s)return;let n=s.data.instructions.map((({keys:e,programId:a,data:r})=>new u({keys:e.map((({pubkey:e,isSigner:a,isWritable:t})=>({pubkey:new d(e),isSigner:a,isWritable:t}))),programId:new d(a),data:t(r,"hex")}))),o=s.data.addressLookupTableAddresses?.map((e=>new d(e))),i=new c(k(r)),l=await Promise.all((o??[]).map((async e=>i.getAddressLookupTable(e).then((e=>e.value))))),{blockhash:m}=await i.getLatestBlockhash();return{transaction:new f(new w({payerKey:new d(a),instructions:n,recentBlockhash:m}).compileToV0Message(l)),connection:i}}};const g=a=>{r("fundSolanaWallet",a);let t=s(),{setModalData:c}=n(),{openModal:d}=y();return o(h),{fundWallet:e((async(e,a)=>{c({funding:i({address:e,appConfig:t,fundWalletConfig:a,methodScreen:l})}),d(l)}),[t,c,d])}};export{h as t,g as u};
